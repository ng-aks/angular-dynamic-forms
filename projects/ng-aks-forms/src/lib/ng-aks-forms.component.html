<div class="p-2">
  <form [formGroup]="dynamicFormGroup" (ngSubmit)="onSubmit()">
    <div *ngFor="let control of formConfig">
      <div [ngSwitch]="control.type">
        <div class="mb-3" *ngSwitchCase="'select'">
          <label class="form-label">{{control.label}}</label>
          <select class="form-select" [formControlName]="control.name">
            <option *ngFor="let option of control.options" [value]="option.value">
              {{option.label}}
            </option>
          </select>
        </div>
        <div class="mb-3" *ngSwitchCase="'textarea'">
          <label class="form-label">{{control.label}}</label>
          <textarea class="form-control" [formControlName]="control.name"></textarea>
        </div>
        <div class="mb-3" *ngSwitchDefault>
          <label class="form-label">{{control.label}}</label>
          <input class="form-control" [type]="control.type" [formControlName]="control.name">
        </div>
      </div>
      <span *ngIf="dynamicFormGroup.controls[control.name]?.invalid && dynamicFormGroup.controls[control.name]?.touched">
        {{getErrorMessage(control)}}
      </span>
    </div>
    <button class="btn btn-primary" type="submit">Submit</button>
  </form>
</div>